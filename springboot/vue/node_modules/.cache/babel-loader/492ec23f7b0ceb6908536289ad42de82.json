{"remainingRequest":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\src\\views\\Person.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\src\\views\\Person.vue","mtime":1647006286614},{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\babel.config.js","mtime":1643450458000},{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\前端全栈之路\\外包\\毕设项目\\campus_treasure\\springboot\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxcdTUyNERcdTdBRUZcdTUxNjhcdTY4MDhcdTRFNEJcdThERUZcXFx1NTkxNlx1NTMwNVxcXHU2QkQ1XHU4QkJFXHU5ODc5XHU3NkVFXFxjYW1wdXNfdHJlYXN1cmVcXHNwcmluZ2Jvb3RcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBlcnNvbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHt9LAogICAgICB1c2VyOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKSA6IHt9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5nZXRVc2VyKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIF90aGlzLmZvcm0gPSByZXM7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFVzZXI6IGZ1bmN0aW9uIGdldFVzZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIucmVxdWVzdC5kZWxldGUoIi91c2VyL3BlcnNvbk1zZy8iICsgX3RoaXMyLnVzZXIuc3R1TnVtKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudC5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5yZXF1ZXN0LnBvc3QoIi91c2VyL3NhdmUiLCB0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgX3RoaXMzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/neWtmOaIkOWKnyIpOyAvL+inpuWPkeeItue6p+abtOaWsFVzZXLnmoTmlrnms5UKCgogICAgICAgICAgX3RoaXMzLiRlbWl0KCJyZWZyZXNoVXNlciIpOyAvL+abtOaWsOa1j+iniOWZqOWtmOWCqOeahOeUqOaIt+S/oeaBryznoa7kv53mtY/op4jlmajkv6Hmga/mmK/mraPnoa7nmoQKCgogICAgICAgICAgX3RoaXMzLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgcmVzLnRva2VuID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKS50b2tlbjsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXIiLCBKU09OLnN0cmluZ2lmeShyZXMpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UuZXJyb3IoIuS/neWtmOWksei0pSIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQXZhdGFyU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMpIHsKICAgICAgdGhpcy5mb3JtLmF2YXRhciA9IHJlczsKICAgIH0gLy8gYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsKICAgIC8vICAgY29uc3QgaXNKUEcgPSBmaWxlLnR5cGUgPT09ICdpbWFnZS9qcGVnJzsKICAgIC8vICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwogICAgLy8gICBpZiAoIWlzSlBHKSB7CiAgICAvLyAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95pivIEpQRyDmoLzlvI8hJyk7CiAgICAvLyAgIH0KICAgIC8vICAgaWYgKCFpc0x0Mk0pIHsKICAgIC8vICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4cgMk1CIScpOwogICAgLy8gICB9CiAgICAvLyAgIHJldHVybiBpc0pQRyAmJiBpc0x0Mk07CiAgICAvLyB9LAoKICB9Cn07"},{"version":3,"sources":["Person.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,YAAA,CAAA,OAAA,CAAA,MAAA,IAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA,GAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OARA,qBAQA;AAAA;;AACA,SAAA,OAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,GAAA;AACA,KAHA;AAMA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MAAA,CAAA,OAAA,CAAA,MAAA,CAAA,qBAAA,MAAA,CAAA,IAAA,CAAA,MAAA,CADA;;AAAA;AAAA,+DACA,IADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,KAHA;AAIA,IAAA,IAJA,kBAIA;AAAA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,YAAA,EAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,EADA,CAGA;;;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,aAAA,EAJA,CAMA;;;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA,KAAA;AACA,YAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA;AACA,WAHA;AAIA,SAXA,MAWA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA;AACA;AACA,OAfA;AAgBA,KArBA;AAsBA,IAAA,mBAtBA,+BAsBA,GAtBA,EAsBA;AACA,WAAA,IAAA,CAAA,MAAA,GAAA,GAAA;AACA,KAxBA,CAyBA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AApCA;AAhBA,CAAA","sourcesContent":["<template>\r\n  <el-card class=\"containerPerson\">\r\n      <el-form :model=\"form\" label-width=\"80px\" size=\"small\">\r\n        <el-upload \r\n          class=\"avatar-uploader\"\r\n          action=\"http://localhost:8088/file/upload\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"handleAvatarSuccess\">\r\n          <img v-if=\"form.avatar\" :src=\"form.avatar\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\">\r\n          <el-input v-model=\"form.pwd\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"电话\">\r\n          <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"年级\">\r\n          <el-input v-model=\"form.grade\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n         <el-form-item label=\"头像\">\r\n          <el-input v-model=\"form.avatar\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"Person\",\r\n    data(){\r\n        return {\r\n            form:{},\r\n            user:localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\r\n        }\r\n    },\r\n    created(){\r\n      this.getUser().then(res=>{\r\n        console.log(res);\r\n        this.form = res;\r\n      });\r\n     \r\n\r\n    },\r\n    methods:{ \r\n       async getUser() {\r\n        return (await this.request.delete(\"/user/personMsg/\"+this.user.stuNum)).data;\r\n        },\r\n        save() {\r\n            this.request.post(\"/user/save\", this.form).then(res => {\r\n                if (res.data) {\r\n                   this.$message.success(\"保存成功\");\r\n                  \r\n                  //触发父级更新User的方法\r\n                  this.$emit(\"refreshUser\");\r\n\r\n                   //更新浏览器存储的用户信息,确保浏览器信息是正确的\r\n                   this.getUser().then(res=>{\r\n                    res.token = JSON.parse(localStorage.getItem(\"user\")).token;\r\n                    localStorage.setItem(\"user\",JSON.stringify(res));\r\n                   });\r\n                } else {\r\n                    this.$message.error(\"保存失败\")\r\n                }\r\n            })\r\n        },\r\n        handleAvatarSuccess(res) {\r\n          this.form.avatar = res;\r\n        },\r\n      // beforeAvatarUpload(file) {\r\n      //   const isJPG = file.type === 'image/jpeg';\r\n      //   const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      //   if (!isJPG) {\r\n      //     this.$message.error('上传头像图片只能是 JPG 格式!');\r\n      //   }\r\n      //   if (!isLt2M) {\r\n      //     this.$message.error('上传头像图片大小不能超过 2MB!');\r\n      //   }\r\n      //   return isJPG && isLt2M;\r\n      // },\r\n      \r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n.containerPerson{\r\n    width: 500px;\r\n    padding: 20px;\r\n    border: 1px solid #ccc;\r\n  }\r\n  \r\n  .avatar-uploader {\r\n    text-align: center;\r\n    padding-bottom: 10px;\r\n  }\r\n\r\n .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 140px;\r\n    height: 140px;\r\n    line-height: 140px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 140px;\r\n    height: 140px;\r\n    display: block;\r\n  }\r\n</style>"],"sourceRoot":"src/views"}]}